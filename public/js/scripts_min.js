class Despesa{constructor(e,t,a,o,s,l){this.ano=e,this.mes=t,this.dia=a,this.tipo=o,this.descricao=s,this.valor=l}validarDados(){for(let e in this)if(null==this[e]||""==this[e]||null==this[e])return!1;return!0}}class Bd{constructor(){null===localStorage.getItem("id")&&localStorage.setItem("id",0)}getProximoId(){let e=localStorage.getItem("id");return parseInt(e)+1}gravar(e){let t=this.getProximoId();localStorage.setItem(t,JSON.stringify(e)),localStorage.setItem("id",t)}recuperarTodosRegistros(){let e=Array(),t=localStorage.getItem("id");for(let a=1;a<=t;a++){let t=JSON.parse(localStorage.getItem(a));null!==t&&(t.id=a,e.push(t))}return e}pesquisar(e){let t=Array();return t=this.recuperarTodosRegistros(),console.log(t),""!=e.ano&&(t=t.filter(t=>t.ano==e.ano)),""!=e.mes&&(t=t.filter(t=>t.mes==e.mes)),""!=e.dia&&(t=t.filter(t=>t.dia==e.dia)),""!=e.tipo&&(t=t.filter(t=>t.tipo==e.tipo)),""!=e.descricao&&(t=t.filter(t=>t.descricao==e.descricao)),""!=e.valor&&(t=t.filter(t=>t.valor==e.valor)),console.log(t),0!=t.length?t:1}remover(e){localStorage.removeItem(e)}}let bd=new Bd;function cadastrarDespesa(){let e=document.getElementById("ano"),t=document.getElementById("mes"),a=document.getElementById("dia"),o=document.getElementById("tipo"),s=document.getElementById("descricao"),l=document.getElementById("valor"),n=new Despesa(e.value,t.value,a.value,o.value,s.value,l.value);n.validarDados()?(bd.gravar(n),document.getElementById("modal_titulo").innerHTML="Registro inserido com sucesso",document.getElementById("modal_titulo_div").className="modal-header text-success",document.getElementById("modal_conteudo").innerHTML="Despesa foi cadastrada com sucesso!",document.getElementById("modal_btn").innerHTML="Voltar",document.getElementById("modal_btn").className="btn btn-success",$("#modalRegistraDespesa").modal("show"),e.value="",t.value="",a.value="",o.value="",s.value="",l.value=""):(document.getElementById("modal_titulo").innerHTML="Erro na inclusão do registro",document.getElementById("modal_titulo_div").className="modal-header text-danger",document.getElementById("modal_conteudo").innerHTML="Erro na gravação, verifique se todos os campos foram preenchidos corretamente!",document.getElementById("modal_btn").innerHTML="Voltar e corrigir",document.getElementById("modal_btn").className="btn btn-danger",$("#modalRegistraDespesa").modal("show"))}function carregaListaDespesas(e=Array()){0==e.length&&(e=bd.recuperarTodosRegistros());let t=document.getElementById("listaDespesas");t.innerHTML="";let a=0;e.forEach(function(e){let o=t.insertRow();switch(o.insertCell(0).innerHTML=`${e.dia}/${e.mes}/${e.ano}`,a+=parseFloat(e.valor),e.tipo){case"1":e.tipo="Alimentação";break;case"2":e.tipo="Educação";break;case"3":e.tipo="Lazer";break;case"4":e.tipo="Saúde";break;case"5":e.tipo="Transporte"}o.insertCell(1).innerHTML=e.tipo,o.insertCell(2).innerHTML=e.descricao,o.insertCell(3).innerHTML=e.valor;let s=document.createElement("button");s.className="btn btn-danger",s.innerHTML='<i class="fas fa-times"></i>',s.id="id_despesa_"+e.id,s.onclick=function(){let e=this.id.replace("id_despesa_","");bd.remover(e),window.location.reload()},o.insertCell(4).append(s)}),document.getElementById("total").innerHTML=a}function pesquisarDespesa(){let e=document.getElementById("ano").value,t=document.getElementById("mes").value,a=document.getElementById("dia").value,o=document.getElementById("tipo").value,s=document.getElementById("descricao").value,l=document.getElementById("valor").value,n=new Despesa(e,t,a,o,s,l);despesas=bd.pesquisar(n),1!=despesas?carregaListaDespesas(despesas):(document.getElementById("listaDespesas").innerHTML="",document.getElementById("total").innerHTML=0)}